<h1>NHL Game Recaps</h1>
<div id="videos" data-ng-init="getYesterdayGames()"></div>

<script src="functions.js"></script>
<script>
    const electron = require('electron');
    window.jQuery = window.$ = require('jquery'); //This takes the place of require for js. Electron handles importing differently.

    window.onload() = function(){
        getYesterdayGames();
    }

    function getYesterdayGames(){
        getGamesAccordingToDate(getOlderDate(1), function(gamesForTheDay, matchups){
        var i = 0;
        var header = document.createElement("h1");
        header.textContent = getOlderDate(1);
        var videoWrapper = document.createElement("div");
        videoWrapper.className = "wrapper";
        videoWrapper.id = "videoWrapper1";
        document.getElementById("videos").appendChild(header);
        document.getElementById("videos").appendChild(videoWrapper);
        gamesForTheDay.forEach(function(e){
            getGameContent(e, function(videoURL, pictureURL){
                var newDiv = document.createElement("div");
                newDiv.className = "box " + e;
                newDiv.id = "video" + e;
                document.getElementById('videoWrapper1').appendChild(newDiv);
                var newVideo = document.createElement("video");
                newVideo.width = "300";
                newVideo.height = "200";
                newVideo.src = videoURL;
                newVideo.poster = pictureURL;
                newVideo.controls = true;
                document.getElementById('video' + e).appendChild(newVideo);
                var gameMatchup = document.createElement("p");
                gameMatchup.textContent = matchups[i];
                gameMatchup.id = "gameMatchup";
                document.getElementById('video' + e).insertAdjacentElement("afterbegin", gameMatchup);
                i++;
                });
            });
        }); 
    }

    getGamesAccordingToDate(getOlderDate(1), function(gamesForTheDay, matchups){
        var i = 0;
        var header = document.createElement("h1");
        header.textContent = getOlderDate(1);
        var videoWrapper = document.createElement("div");
        videoWrapper.className = "wrapper";
        videoWrapper.id = "videoWrapper1";
        document.getElementById("videos").appendChild(header);
        document.getElementById("videos").appendChild(videoWrapper);
        gamesForTheDay.forEach(function(e){
            getGameContent(e, function(videoURL, pictureURL){
                var newDiv = document.createElement("div");
                newDiv.className = "box " + e;
                newDiv.id = "video" + e;
                document.getElementById('videoWrapper1').appendChild(newDiv);
                var newVideo = document.createElement("video");
                newVideo.width = "300";
                newVideo.height = "200";
                newVideo.src = videoURL;
                newVideo.poster = pictureURL;
                newVideo.controls = true;
                document.getElementById('video' + e).appendChild(newVideo);
                var gameMatchup = document.createElement("p");
                gameMatchup.textContent = matchups[i];
                gameMatchup.id = "gameMatchup";
                document.getElementById('video' + e).insertAdjacentElement("afterbegin", gameMatchup);
                i++;
            });
        });
    });

    getGamesAccordingToDate(getOlderDate(2), function(gamesForTheDay, matchups){
        var i = 0;
        var header = document.createElement("h1");
        header.textContent = getOlderDate(2);
        header.id = "videoHeader2";
        var videoWrapper = document.createElement("div");
        videoWrapper.className = "wrapper";
        videoWrapper.id = "videoWrapper2";
        header.appendAfter(document.getElementById("videoWrapper1"));
        videoWrapper.appendAfter(document.getElementById("videoHeader2"));
        gamesForTheDay.forEach(function(e){
            getGameContent(e, function(videoURL, pictureURL){
                var newDiv = document.createElement("div");
                newDiv.className = "box " + e;
                newDiv.id = "video" + e;
                document.getElementById('videoWrapper2').appendChild(newDiv);
                var newVideo = document.createElement("video");
                newVideo.width = "300";
                newVideo.height = "200";
                newVideo.src = videoURL;
                newVideo.poster = pictureURL;
                newVideo.controls = true;
                document.getElementById('video' + e).appendChild(newVideo);
                var gameMatchup = document.createElement("p");
                gameMatchup.textContent = matchups[i];
                gameMatchup.id = "gameMatchup";
                document.getElementById('video' + e).insertAdjacentElement("afterbegin", gameMatchup);
                i++;
            });
        });
    });